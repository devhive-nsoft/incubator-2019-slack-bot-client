{"remainingRequest":"/home/newsmay/Desktop/test/node_modules/babel-loader/lib/index.js!/home/newsmay/Desktop/test/node_modules/vuetify-loader/lib/loader.js!/home/newsmay/Desktop/test/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/newsmay/Desktop/test/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/newsmay/Desktop/test/src/components/schedules.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/newsmay/Desktop/test/src/components/schedules.vue","mtime":1565257563059},{"path":"/home/newsmay/Desktop/test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/newsmay/Desktop/test/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/newsmay/Desktop/test/node_modules/vuetify-loader/lib/loader.js","mtime":1549812933000},{"path":"/home/newsmay/Desktop/test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/newsmay/Desktop/test/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/home/newsmay/Desktop/test/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { Current_User_Role, THEME } from \"../constants/index.js\";\nimport { ACCESS_TOKEN } from \"../constants/index.js\";\nimport axios from \"axios\";\nimport ClickOutside from \"vue-click-outside\";\nexport default {\n  name: \"schedules\",\n  data: function data() {\n    return {\n      items: [{\n        title: \"Profile\"\n      }, {\n        title: \"Settings\"\n      }, {\n        title: \"Terms\"\n      }, {\n        title: \"Log Out\"\n      }],\n      schedulesData: [],\n      rowSize: 20,\n      //Number of rows\n      pagesSize: 1,\n      //Number of pages\n      page: 1,\n      //current active page\n      menu: false,\n      rowSizesValue: [5, 10, 20],\n      sortType: \"desc\",\n      textNoti: \"\",\n      errorOccured: false,\n      showNoti: false,\n      sortByValue: \"createdAt\"\n    };\n  },\n  mounted: function mounted() {\n    var xhr = new XMLHttpRequest();\n    xhr.open('GET', 'http://localhost:8080/user/me');\n    xhr.setRequestHeader('Content-Type', 'application/json');\n\n    if (localStorage.getItem(ACCESS_TOKEN)) {\n      xhr.setRequestHeader('Authorization', 'Bearer ' + localStorage.getItem(ACCESS_TOKEN)); //console.log(\"dohvati ga\");\n    }\n\n    xhr.onload = function () {\n      console.log('Signed in as: ' + xhr.responseText);\n      var obj = JSON.parse(xhr.responseText);\n      document.getElementById(\"email\").innerHTML = obj.email;\n      document.getElementById(\"ime\").innerHTML = obj.name;\n      document.getElementById(\"pic\").src = obj.imageUrl;\n      localStorage.setItem(Current_User_Role, obj.role);\n      localStorage.setItem(THEME, obj.userSettings.theme);\n    };\n\n    xhr.send();\n\n    if (localStorage.getItem(THEME) == \"light\") {\n      document.getElementById(\"header\").style.backgroundColor = \"white\";\n    } else if (localStorage.getItem(THEME) == \"dark\") {\n      document.getElementById(\"header\").style.backgroundColor = \"black\";\n      document.getElementById(\"lista\").style.backgroundColor = \"black\";\n    } //onload funkcija\n    //this.create();\n\n  },\n  filters: {\n    shortDate: function shortDate(value) {\n      var dateVar = new Date(value);\n      var dataVar2 = dateVar.toDateString();\n      var data = dataVar2.substring(4);\n      return data;\n    },\n    activeView: function activeView(value) {\n      if (value == true) return \"Active\";else return \"Not active\";\n    },\n    repeatView: function repeatView(value) {\n      if (value == true) return \"Repeat\";else return \"Not repeat\";\n    }\n  },\n  methods: {\n    reloadSchedules: function () {\n      var _reloadSchedules = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var pg, res;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                pg = this.page - 1;\n                _context.prev = 1;\n                _context.next = 4;\n                return axios.get(\"http://localhost:8080/api/schedules?page=\" + pg + \"&size=\" + this.rowSize + \"&sort=\" + this.sortByValue + \",\" + this.sortType);\n\n              case 4:\n                res = _context.sent;\n                if (res.data.totalPages < this.page) this.changePage(res.data.totalPages);\n                this.schedulesData = res.data.content;\n                this.pagesSize = res.data.totalPages;\n                _context.next = 13;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](1);\n                alert(_context.t0);\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[1, 10]]);\n      }));\n\n      function reloadSchedules() {\n        return _reloadSchedules.apply(this, arguments);\n      }\n\n      return reloadSchedules;\n    }(),\n    showNotification: function showNotification(value) {\n      if (value == -1) {\n        this.textNoti = \"Some error have occured\";\n        this.errorOccured = true;\n      } else {\n        this.errorOccured = false;\n        this.textNoti = \"Succes\";\n      }\n\n      this.showNoti = !this.showNoti;\n      setTimeout(this.closeNoti, 1500);\n      {}\n    },\n    closeNoti: function closeNoti() {\n      this.showNoti = false;\n    },\n    showScheduleForm: function showScheduleForm() {\n      this.$router.push(\"/dashboard/schedules/newSchedule\");\n    },\n    editSchedule: function () {\n      var _editSchedule = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2(id) {\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                this.$router.push(\"/dashboard/schedules/updateSchedule/\" + id);\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function editSchedule(_x) {\n        return _editSchedule.apply(this, arguments);\n      }\n\n      return editSchedule;\n    }(),\n    deleteSchedule: function () {\n      var _deleteSchedule = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3(id) {\n        var pg, res;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return axios.delete(\"http://localhost:8080/api/schedules/\" + id);\n\n              case 2:\n                pg = this.page - 1;\n                _context3.prev = 3;\n                _context3.next = 6;\n                return axios.get(\"http://localhost:8080/api/schedules?page=\" + pg + \"&size=\" + this.rowSize + \"&sort=\" + this.sortByValue + \",\" + this.sortType);\n\n              case 6:\n                res = _context3.sent;\n\n                if (res.data.numberOfElements == 0) {\n                  if (this.page != 1) this.changePage(this.page - 1);\n                }\n\n                this.messagesData = res.data.content;\n                if (res.data.totalPages == 0) this.pagesSize = 1;else this.pagesSize = res.data.totalPages;\n                this.showNotification(200);\n                _context3.next = 16;\n                break;\n\n              case 13:\n                _context3.prev = 13;\n                _context3.t0 = _context3[\"catch\"](3);\n                this.showNotification(-1);\n\n              case 16:\n                this.reloadSchedules();\n\n              case 17:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[3, 13]]);\n      }));\n\n      function deleteSchedule(_x2) {\n        return _deleteSchedule.apply(this, arguments);\n      }\n\n      return deleteSchedule;\n    }(),\n    toggleMenu: function toggleMenu() {\n      this.menu = !this.menu;\n    },\n    hideMenu: function hideMenu() {\n      this.menu = false;\n    },\n    setRows: function setRows(value) {\n      if (value != this.rowSize) {\n        this.rowSize = value;\n        this.reloadSchedules();\n      }\n\n      this.menu = !this.menu;\n    },\n    changePage: function changePage(nextPage) {\n      this.page = nextPage;\n      this.reloadSchedules(nextPage - 1);\n    },\n    create: function () {\n      var _create = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee4() {\n        var res;\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                _context4.next = 3;\n                return axios.get(\"http://localhost:8080/api/schedules?page=0&size=\" + this.rowSize + \"&sort=\" + this.sortByValue + \",\" + this.sortType);\n\n              case 3:\n                res = _context4.sent;\n                this.schedulesData = res.data.content;\n                if (res.data.totalPages == 0) this.pagesSize = 1;else this.pagesSize = res.data.totalPages;\n                this.rowSize = res.data.size;\n                _context4.next = 12;\n                break;\n\n              case 9:\n                _context4.prev = 9;\n                _context4.t0 = _context4[\"catch\"](0);\n                //alert(err);\n                console.log(_context4.t0);\n\n              case 12:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[0, 9]]);\n      }));\n\n      function create() {\n        return _create.apply(this, arguments);\n      }\n\n      return create;\n    }(),\n    prikazi: function prikazi(index) {\n      if (index == 0) {\n        this.$router.push(\"/profile\");\n      } else if (index == 1) {\n        this.$router.push(\"/settings\");\n      }\n    }\n  },\n  sortBy: function sortBy(value) {\n    if (this.sortType == \"desc\") this.sortType = \"asc\";else this.sortType = \"desc\";\n    this.sortByValue = value;\n    this.reloadSchedules();\n  },\n  directives: {\n    ClickOutside: ClickOutside\n  }\n};",{"version":3,"sources":["schedules.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiHA,SAAA,iBAAA,EAAA,KAAA;AACA,SAAA,YAAA;AACA,OAAA,KAAA,MAAA,OAAA;AACA,OAAA,YAAA,MAAA,mBAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,WADA;AAGA,EAAA,IAHA,kBAGA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,CACA;AAAA,QAAA,KAAA,EAAA;AAAA,OADA,EAEA;AAAA,QAAA,KAAA,EAAA;AAAA,OAFA,EAGA;AAAA,QAAA,KAAA,EAAA;AAAA,OAHA,EAIA;AAAA,QAAA,KAAA,EAAA;AAAA,OAJA,CADA;AAOA,MAAA,aAAA,EAAA,EAPA;AAQA,MAAA,OAAA,EAAA,EARA;AAQA;AACA,MAAA,SAAA,EAAA,CATA;AASA;AACA,MAAA,IAAA,EAAA,CAVA;AAUA;AACA,MAAA,IAAA,EAAA,KAXA;AAYA,MAAA,aAAA,EAAA,CAAA,CAAA,EAAA,EAAA,EAAA,EAAA,CAZA;AAaA,MAAA,QAAA,EAAA,MAbA;AAcA,MAAA,QAAA,EAAA,EAdA;AAeA,MAAA,YAAA,EAAA,KAfA;AAgBA,MAAA,QAAA,EAAA,KAhBA;AAiBA,MAAA,WAAA,EAAA;AAjBA,KAAA;AAmBA,GAvBA;AAyBA,EAAA,OAAA,EAAA,mBAAA;AAAA,QAAA,GAAA,GAAA,IAAA,cAAA,EAAA;AACA,IAAA,GAAA,CAAA,IAAA,CAAA,KAAA,EAAA,+BAAA;AAEA,IAAA,GAAA,CAAA,gBAAA,CAAA,cAAA,EAAA,kBAAA;;AACA,QAAA,YAAA,CAAA,OAAA,CAAA,YAAA,CAAA,EAAA;AACA,MAAA,GAAA,CAAA,gBAAA,CAAA,eAAA,EAAA,YAAA,YAAA,CAAA,OAAA,CAAA,YAAA,CAAA,EADA,CAEA;AACA;;AAEA,IAAA,GAAA,CAAA,MAAA,GAAA,YAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,mBAAA,GAAA,CAAA,YAAA;AACA,UAAA,GAAA,GAAA,IAAA,CAAA,KAAA,CAAA,GAAA,CAAA,YAAA,CAAA;AACA,MAAA,QAAA,CAAA,cAAA,CAAA,OAAA,EAAA,SAAA,GAAA,GAAA,CAAA,KAAA;AACA,MAAA,QAAA,CAAA,cAAA,CAAA,KAAA,EAAA,SAAA,GAAA,GAAA,CAAA,IAAA;AACA,MAAA,QAAA,CAAA,cAAA,CAAA,KAAA,EAAA,GAAA,GAAA,GAAA,CAAA,QAAA;AACA,MAAA,YAAA,CAAA,OAAA,CAAA,iBAAA,EAAA,GAAA,CAAA,IAAA;AACA,MAAA,YAAA,CAAA,OAAA,CAAA,KAAA,EAAA,GAAA,CAAA,YAAA,CAAA,KAAA;AAEA,KATA;;AAUA,IAAA,GAAA,CAAA,IAAA;;AACA,QAAA,YAAA,CAAA,OAAA,CAAA,KAAA,KAAA,OAAA,EAAA;AACA,MAAA,QAAA,CAAA,cAAA,CAAA,QAAA,EAAA,KAAA,CAAA,eAAA,GAAA,OAAA;AACA,KAFA,MAEA,IAAA,YAAA,CAAA,OAAA,CAAA,KAAA,KAAA,MAAA,EAAA;AACA,MAAA,QAAA,CAAA,cAAA,CAAA,QAAA,EAAA,KAAA,CAAA,eAAA,GAAA,OAAA;AACA,MAAA,QAAA,CAAA,cAAA,CAAA,OAAA,EAAA,KAAA,CAAA,eAAA,GAAA,OAAA;AACA,KAzBA,CA0BA;AACA;;AACA,GArDA;AAuDA,EAAA,OAAA,EAAA;AACA,IAAA,SADA,qBACA,KADA,EACA;AACA,UAAA,OAAA,GAAA,IAAA,IAAA,CAAA,KAAA,CAAA;AACA,UAAA,QAAA,GAAA,OAAA,CAAA,YAAA,EAAA;AACA,UAAA,IAAA,GAAA,QAAA,CAAA,SAAA,CAAA,CAAA,CAAA;AACA,aAAA,IAAA;AACA,KANA;AAOA,IAAA,UAPA,sBAOA,KAPA,EAOA;AACA,UAAA,KAAA,IAAA,IAAA,EACA,OAAA,QAAA,CADA,KAGA,OAAA,YAAA;AACA,KAZA;AAaA,IAAA,UAbA,sBAaA,KAbA,EAaA;AACA,UAAA,KAAA,IAAA,IAAA,EACA,OAAA,QAAA,CADA,KAGA,OAAA,YAAA;AACA;AAlBA,GAvDA;AA4EA,EAAA,OAAA,EAAA;AACA,IAAA,eADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,gBAAA,EAFA,GAEA,KAAA,IAAA,GAAA,CAFA;AAAA;AAAA;AAAA,uBAKA,KAAA,CAAA,GAAA,CAAA,8CAAA,EAAA,GAAA,QAAA,GAAA,KAAA,OAAA,GAAA,QAAA,GAAA,KAAA,WAAA,GAAA,GAAA,GAAA,KAAA,QAAA,CALA;;AAAA;AAKA,gBAAA,GALA;AAOA,oBAAA,GAAA,CAAA,IAAA,CAAA,UAAA,GAAA,KAAA,IAAA,EACA,KAAA,UAAA,CAAA,GAAA,CAAA,IAAA,CAAA,UAAA;AAEA,qBAAA,aAAA,GAAA,GAAA,CAAA,IAAA,CAAA,OAAA;AACA,qBAAA,SAAA,GAAA,GAAA,CAAA,IAAA,CAAA,UAAA;AAXA;AAAA;;AAAA;AAAA;AAAA;AAeA,gBAAA,KAAA,aAAA;;AAfA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAmBA,IAAA,gBAnBA,4BAmBA,KAnBA,EAmBA;AACA,UAAA,KAAA,IAAA,CAAA,CAAA,EACA;AACA,aAAA,QAAA,GAAA,yBAAA;AACA,aAAA,YAAA,GAAA,IAAA;AACA,OAJA,MAMA;AACA,aAAA,YAAA,GAAA,KAAA;AACA,aAAA,QAAA,GAAA,QAAA;AACA;;AACA,WAAA,QAAA,GAAA,CAAA,KAAA,QAAA;AACA,MAAA,UAAA,CAAA,KAAA,SAAA,EAAA,IAAA,CAAA;AACA,OAAA;AACA,KAjCA;AAmCA,IAAA,SAnCA,uBAmCA;AACA,WAAA,QAAA,GAAA,KAAA;AACA,KArCA;AAuCA,IAAA,gBAvCA,8BAuCA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,kCAAA;AACA,KAzCA;AA2CA,IAAA,YA3CA;AAAA;AAAA;AAAA,gDA2CA,EA3CA;AAAA;AAAA;AAAA;AAAA;AA4CA,qBAAA,OAAA,CAAA,IAAA,CAAA,yCAAA,EAAA;;AA5CA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AA+CA,IAAA,cA/CA;AAAA;AAAA;AAAA,gDA+CA,EA/CA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAgDA,KAAA,CAAA,MAAA,CAAA,yCAAA,EAAA,CAhDA;;AAAA;AAiDA,gBAAA,EAjDA,GAiDA,KAAA,IAAA,GAAA,CAjDA;AAAA;AAAA;AAAA,uBAoDA,KAAA,CAAA,GAAA,CAAA,8CAAA,EAAA,GAAA,QAAA,GAAA,KAAA,OAAA,GAAA,QAAA,GAAA,KAAA,WAAA,GAAA,GAAA,GAAA,KAAA,QAAA,CApDA;;AAAA;AAoDA,gBAAA,GApDA;;AAsDA,oBAAA,GAAA,CAAA,IAAA,CAAA,gBAAA,IAAA,CAAA,EACA;AACA,sBAAA,KAAA,IAAA,IAAA,CAAA,EACA,KAAA,UAAA,CAAA,KAAA,IAAA,GAAA,CAAA;AACA;;AACA,qBAAA,YAAA,GAAA,GAAA,CAAA,IAAA,CAAA,OAAA;AACA,oBAAA,GAAA,CAAA,IAAA,CAAA,UAAA,IAAA,CAAA,EACA,KAAA,SAAA,GAAA,CAAA,CADA,KAGA,KAAA,SAAA,GAAA,GAAA,CAAA,IAAA,CAAA,UAAA;AACA,qBAAA,gBAAA,CAAA,GAAA;AAhEA;AAAA;;AAAA;AAAA;AAAA;AAoEA,qBAAA,gBAAA,CAAA,CAAA,CAAA;;AApEA;AAsEA,qBAAA,eAAA;;AAtEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAyEA,IAAA,UAzEA,wBAyEA;AACA,WAAA,IAAA,GAAA,CAAA,KAAA,IAAA;AACA,KA3EA;AA6EA,IAAA,QA7EA,sBA6EA;AACA,WAAA,IAAA,GAAA,KAAA;AACA,KA/EA;AAiFA,IAAA,OAjFA,mBAiFA,KAjFA,EAiFA;AACA,UAAA,KAAA,IAAA,KAAA,OAAA,EAAA;AACA,aAAA,OAAA,GAAA,KAAA;AACA,aAAA,eAAA;AACA;;AACA,WAAA,IAAA,GAAA,CAAA,KAAA,IAAA;AACA,KAvFA;AAyFA,IAAA,UAzFA,sBAyFA,QAzFA,EAyFA;AACA,WAAA,IAAA,GAAA,QAAA;AACA,WAAA,eAAA,CAAA,QAAA,GAAA,CAAA;AACA,KA5FA;AA8FA,IAAA,MA9FA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAiGA,KAAA,CAAA,GAAA,CAAA,qDAAA,KAAA,OAAA,GAAA,QAAA,GAAA,KAAA,WAAA,GAAA,GAAA,GAAA,KAAA,QAAA,CAjGA;;AAAA;AAiGA,gBAAA,GAjGA;AAkGA,qBAAA,aAAA,GAAA,GAAA,CAAA,IAAA,CAAA,OAAA;AACA,oBAAA,GAAA,CAAA,IAAA,CAAA,UAAA,IAAA,CAAA,EACA,KAAA,SAAA,GAAA,CAAA,CADA,KAGA,KAAA,SAAA,GAAA,GAAA,CAAA,IAAA,CAAA,UAAA;AACA,qBAAA,OAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;AAvGA;AAAA;;AAAA;AAAA;AAAA;AA0GA;AACA,gBAAA,OAAA,CAAA,GAAA;;AA3GA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AA8GA,IAAA,OA9GA,mBA8GA,KA9GA,EA8GA;AACA,UAAA,KAAA,IAAA,CAAA,EAAA;AACA,aAAA,OAAA,CAAA,IAAA,CAAA,UAAA;AACA,OAFA,MAGA,IAAA,KAAA,IAAA,CAAA,EAAA;AACA,aAAA,OAAA,CAAA,IAAA,CAAA,WAAA;AACA;AACA;AArHA,GA5EA;AAoMA,EAAA,MApMA,kBAoMA,KApMA,EAqMA;AACA,QAAA,KAAA,QAAA,IAAA,MAAA,EACA,KAAA,QAAA,GAAA,KAAA,CADA,KAGA,KAAA,QAAA,GAAA,MAAA;AAEA,SAAA,WAAA,GAAA,KAAA;AACA,SAAA,eAAA;AACA,GA7MA;AA8MA,EAAA,UAAA,EAAA;AACA,IAAA,YAAA,EAAA;AADA;AA9MA,CAAA","sourcesContent":["<template>\n   <div id=\"Schedules\" class=\"tabcontent\">\n<router-view @reload-schedules=\"reloadSchedules()\" @show-notification=\"showNotification($event)\"></router-view>\n<div id=\"header\">\n        <h1>Schedules</h1>\n        <v-menu open-on-hover bottom offset-y>\n          <template v-slot:activator=\"{ on }\">\n            <div id=\"usersdata\" v-on=\"on\">\n              <i id=\"ikona\" class=\"material-icons\">arrow_drop_down</i>\n              <button id=\"slika\">\n                <img id=\"pic\" class=\"img-circle\" width=\"80\" height=\"70\" />\n              </button>\n              <div id=\"credentials\">\n                <h3 id=\"ime\">Amina Fajić</h3>\n                <br />\n                <p id=\"email\">aminafajic879@gmail.com</p>\n              </div>\n            </div>\n          </template>\n          <ul>\n            <li class=\"listaopcijauser\" v-for=\"(item, index) in items\" :key=\"index\" @click=\"prikazi()\">\n              <p id=\"opcijauser\">  {{ item.title }} </p>            </li>\n          </ul>\n        </v-menu>\n      </div>\n   <div id=\"lista\">\n    <ul id=\"list\">\n      <li id=\"title-li\">\n        <div class=\"column1 column\">\n          <h5>Message</h5>\n          <p>\n            <i class=\"material-icons\" @click=\"sortBy('message.title')\">arrow_drop_down</i>\n          </p>\n        </div>\n        <div class=\"column2 column\">\n          <h5>Next Run</h5>\n          <p>\n            <i class=\"material-icons\" @click=\"sortBy('runAt')\">arrow_drop_down</i>\n          </p>\n        </div>\n        <div class=\"column3 column\">\n          <h5>Active At</h5>\n          <p>\n            <i class=\"tooltip, material-icons\" @click=\"sortBy('active')\">arrow_drop_down</i>\n          </p>\n        </div>\n        <div class=\"column6 column\">\n          <h5>Repeat</h5>\n          <p>\n            <i class=\"tooltip, material-icons\" @click=\"sortBy('repeat')\">arrow_drop_down</i>\n          </p>\n        </div>\n        <div class=\"column5 column\">\n          <h5>Channel</h5>\n          <p>\n            <i class=\"tooltip, material-icons\" @click=\"sortBy('channel')\">arrow_drop_down</i>\n          </p>\n        </div>\n        <div class=\"column4 column\">\n          <p>\n            <i class=\"material-icons\">filter_list</i>\n          </p>\n        </div>\n      </li>\n\n      <li v-for=\"schedule in schedulesData\" :key=\"schedule.scheduleId\">\n        <div class=\"linear1\"></div>\n        <div class=\"linear2\"></div>\n        <div class=\"column1 column\">\n          <p>{{ schedule.message.title }}</p>\n        </div>\n        <div class=\"column2 column\">\n          <p>{{ schedule.runAt | shortDate}}</p>\n        </div>\n        <div class=\"column3 column\">\n          <p>{{ schedule.active | activeView }}</p>\n        </div>\n        <div class=\"column6 column\">\n          <p>{{ schedule.repeat | repeatView }}</p>\n        </div>\n        <div class=\"column5 column\">\n          <p>{{ schedule.channel }}</p>\n        </div>\n        <div class=\"column4 column\">\n          <i class=\"material-icons\" @click=\"editSchedule(schedule.scheduleId)\">create</i>\n          <i class=\"material-icons\" @click=\"deleteSchedule(schedule.scheduleId)\">delete</i>\n        </div>\n\n      </li>\n    </ul>\n  </div>\n\n    <div id=\"footer\">\n      <button id=\"footer-btn\" @click=\"toggleMenu\" v-click-outside=\"hideMenu\">{{ this.rowSize }} Rows</button>\n      <div id=\"menu\" v-show=\"menu\">\n        <div class=\"menu-article\" v-for=\"rowValue in rowSizesValue\" :key=\"rowValue\" @click=\"setRows(rowValue)\">{{ rowValue }}</div>\n      </div>\n\n      <div class=\"text-xs-center\">\n        <v-pagination v-model=\"page\" :length=\"pagesSize\" :total-visible=\"5\" @input=\"changePage\"></v-pagination>\n      </div>\n    </div>\n\n    <button @click=\"showScheduleForm\" id=\"btn\">+</button>\n\n    <div id=\"notification\" v-show=\"showNoti\" :class=\"{redBorder: errorOccured, greenBorder: !errorOccured}\">\n      <input type=\"text\" v-model=\"textNoti\" readonly :class=\"{redText: errorOccured, greenText: !errorOccured}\" />\n      <button @click=\"showNotification\" :class=\"{redBackground: errorOccured, greenBackground: !errorOccured}\">OK</button>\n    </div>\n   </div>\n</template>\n\n<script>\nimport {Current_User_Role, THEME} from \"../constants/index.js\";\nimport {ACCESS_TOKEN} from \"../constants/index.js\";\nimport axios from \"axios\";\nimport ClickOutside from \"vue-click-outside\";\n\nexport default {\n  name: \"schedules\",\n\n  data(){\n       return {\n      items: [\n        { title: \"Profile\" },\n        { title: \"Settings\" },\n        { title: \"Terms\" },\n        { title: \"Log Out\" }\n      ],\n      schedulesData: [],\n      rowSize: 20, //Number of rows\n      pagesSize: 1, //Number of pages\n      page: 1, //current active page\n      menu: false,\n      rowSizesValue: [5, 10, 20],\n      sortType: \"desc\",\n      textNoti: \"\",\n      errorOccured: false,\n      showNoti: false,\n      sortByValue: \"createdAt\",\n    }  \n  },\n\n  mounted: function() { var xhr = new XMLHttpRequest();\n         xhr.open('GET', 'http://localhost:8080/user/me');\n         \nxhr.setRequestHeader('Content-Type', 'application/json');\nif(localStorage.getItem(ACCESS_TOKEN)) {\nxhr.setRequestHeader('Authorization', 'Bearer ' + localStorage.getItem(ACCESS_TOKEN));\n//console.log(\"dohvati ga\");\n}\n\n      xhr.onload = function() {\n  console.log('Signed in as: ' + xhr.responseText);\n var obj=JSON.parse(xhr.responseText);\n document.getElementById(\"email\").innerHTML=obj.email;\n document.getElementById(\"ime\").innerHTML=obj.name;\n document.getElementById(\"pic\").src=obj.imageUrl;\n  localStorage.setItem(Current_User_Role, obj.role);\n localStorage.setItem(THEME,obj.userSettings.theme);\n\n};\nxhr.send();\nif(localStorage.getItem(THEME)==\"light\"){\ndocument.getElementById(\"header\").style.backgroundColor=\"white\";\n}else if(localStorage.getItem(THEME)==\"dark\") {\ndocument.getElementById(\"header\").style.backgroundColor=\"black\";\ndocument.getElementById(\"lista\").style.backgroundColor=\"black\";\n}\n    //onload funkcija\n    //this.create();\n  },\n\n  filters: {\n    shortDate(value) {\n      let dateVar = new Date(value);\n      let dataVar2 = dateVar.toDateString();\n      let data = dataVar2.substring(4);\n      return data;\n    },\n    activeView(value){\n      if(value == true)\n        return \"Active\";\n      else\n        return \"Not active\";\n    },\n    repeatView(value){\n      if(value == true)\n        return \"Repeat\";\n      else\n        return \"Not repeat\";\n    }\n  },\n\n  methods: {\n    async reloadSchedules() {\n      var pg = this.page - 1;\n      try \n      {\n        const res = await axios.get(\"http://localhost:8080/api/schedules?page=\" + pg + \"&size=\" + this.rowSize + \"&sort=\" + this.sortByValue + \",\" + this.sortType);\n\n        if (res.data.totalPages < this.page)\n          this.changePage(res.data.totalPages);\n\n        this.schedulesData = res.data.content;\n        this.pagesSize = res.data.totalPages;\n      } \n      catch (err) \n      {\n        alert(err);\n      }\n    },\n\n    showNotification(value) {\n       if(value == -1)\n       {\n           this.textNoti = \"Some error have occured\";\n           this.errorOccured = true;\n       }\n       else\n       {\n          this.errorOccured = false;\n          this.textNoti = \"Succes\"; \n       }\n       this.showNoti = !this.showNoti;\n       setTimeout(this.closeNoti, 1500)\n       {}\n    },\n\n    closeNoti(){\n        this.showNoti = false;\n    },\n\n    showScheduleForm() {\n      this.$router.push(\"/dashboard/schedules/newSchedule\");\n    },\n\n    async editSchedule(id) {\n      this.$router.push(\"/dashboard/schedules/updateSchedule/\" + id);\n    },\n\n    async deleteSchedule(id) {\n      await axios.delete(\"http://localhost:8080/api/schedules/\" + id);\n      var pg = this.page - 1;\n      try \n      {\n        const res = await axios.get(\"http://localhost:8080/api/schedules?page=\" + pg + \"&size=\" + this.rowSize + \"&sort=\" + this.sortByValue + \",\" + this.sortType);\n        \n        if (res.data.numberOfElements == 0) \n        {\n          if (this.page != 1) \n            this.changePage(this.page - 1);\n        }\n        this.messagesData = res.data.content;\n        if (res.data.totalPages == 0) \n            this.pagesSize = 1;\n        else \n            this.pagesSize = res.data.totalPages;\n        this.showNotification(200);\n      } \n      catch (err) \n      {\n        this.showNotification(-1);\n      }\n      this.reloadSchedules();\n    },\n\n    toggleMenu() {\n      this.menu = !this.menu;\n    },\n\n    hideMenu() {\n      this.menu = false;\n    },\n\n    setRows(value) {\n      if (value != this.rowSize) {\n        this.rowSize = value;\n        this.reloadSchedules();\n      }\n      this.menu = !this.menu;\n    },\n\n    changePage(nextPage) {\n      this.page = nextPage;\n      this.reloadSchedules(nextPage - 1);\n    },\n\n    async create() {\n      try \n      {\n        const res = await axios.get(\"http://localhost:8080/api/schedules?page=0&size=\" + this.rowSize + \"&sort=\" + this.sortByValue + \",\" + this.sortType);\n        this.schedulesData = res.data.content;\n        if (res.data.totalPages == 0) \n            this.pagesSize = 1;\n        else \n            this.pagesSize = res.data.totalPages;\n        this.rowSize = res.data.size;\n      }\n      catch (err) {\n       //alert(err);\n        console.log(err);\n      }\n    },\n     prikazi(index) {\n      if(index==0){\n          this.$router.push(\"/profile\");\n        }\n        else if(index==1){\n        this.$router.push(\"/settings\");\n        }\n    }\n  },\n\n    sortBy(value)\n    {\n      if (this.sortType == \"desc\") \n        this.sortType = \"asc\";\n      else \n        this.sortType = \"desc\";\n      \n      this.sortByValue = value;\n      this.reloadSchedules();\n    },\n  directives: {\n    ClickOutside\n  }\n  }\n</script>\n\n<style scoped>\n.listaopcijauser{\n    height:30px;\n}\n#opcijauser{\n    margin:auto;\n    width:100%;\n    text-align:center;\n    font-family: 'Courier New', Courier, monospace;\n    font-size: 12px;\n}\n#usersdata {\n  float: right;\n  height: 72px;\n  margin-top: 0px;\n}\n#usersdata:hover {\n  background-color: #f1f1f1;\n}\n#credentials {\n  height: inherit;\n  float: right;\n  margin-right: 10px;\n  margin-top: 5px;\n}\n#ikona {\n  float: right;\n  margin-top: 25px;\n  margin-right: 10px;\n}\nh1 {\n  margin-top: 15px;\n  margin-left: 20px;\n  width: 200px;\n  float: left;\n}\n#ime {\n  margin-right: 10px;\n  margin-top: 10px;\n  float: right;\n}\n#email {\n  margin-left: 10px;\n  margin-top: 10px;\n  float: right;\n}\n#header {\n  margin-left: 15px;\n  margin-right: 10px;\n  display: block;\n  width: 99%;\n  float: right;\n  background-color: white;\n  height: 72px;\n}\n#pic {\n  border-radius: 50%;\n  float: right;\n  margin-top: 0px;\n}\n#slika {\n  margin-top: 0px;\n  float: right;\n}\n#lista {\n  padding-left: 10px;\n  padding-right: 10px;\n  width: 100%;\n  height: 100vh;\n}\nbody {font-family: \"Lato\", sans-serif;\nbackground:#EAEAEA;}\n\n\n#Schedules{\n  height: 100vh;\n  width: 100%;\n  padding: 20px;\n}\n\n#btn {\n    float:right;\n    height: 60px;\n    width: 60px;\n    border-radius: 50%;\n    font-size: 30px;\n    position: absolute;\n    bottom: 50px;\n    right: 13px;\n    background-color:  #006BF5;;\n    color: white;\n    border: 1px solid white;\n    font-family: 'Courier New', Courier, monospace;\n    line-height: 60px;\n    z-index: 99;\n}\n\n#btn:hover{\n  cursor: pointer;\n}\n\n#footer{\n  bottom: 0%;\n}\n\n.column1{\n  width: 35%;\n  margin-right: 10px;\n}\n\n.column2{\n  width: 7%;\n  margin-right: 25px;\n  margin-left: 0px;\n  position: relative;\n  right: 15px;\n}\n\n#title-li .column2{\n  position: unset;\n}\n\n#title-li .column4{\n  margin-left: 30px;\n}\n\n.column3{\n  margin-left: 5px;\n}\n\n.column4{\n  width: 33%;\n  margin-left: 0px;\n}\n\n.column5{\n  width: 11%;\n  margin-left: 0px;\n  padding-left: 20px;\n}\n\n#title-li .column5{\n  padding-left: 0px;\n}\n\n.column6{\n  width: 7%;\n  margin-left: 0px;\n}\n\n.linear1{\n  left: 34%;\n}\n\n.linear2{\n  left: 67%;\n}\n\n</style>\n"],"sourceRoot":"src/components"}]}